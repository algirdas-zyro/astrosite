---
import Index from './index.astro';
import { mapPageProps } from '../utils/mapPageProps';

const { page } = Astro.props;

export const getStaticPaths = async () => {
	const res = await fetch('https://astrosite.zyrolink.workers.dev/json')
	const siteData = await res.json()

	return Object.entries(siteData.pages).map(([pageId, page]) => mapPageProps(pageId, page, siteData))
}
---
	<Index page={page} />
